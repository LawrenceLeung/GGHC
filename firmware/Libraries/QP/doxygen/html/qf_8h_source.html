<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>QP/C: qf.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.3 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">QP/C</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>qf.h</h1>  </div>
</div>
<div class="contents">
<a href="qf_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Product:  QF/C platform-independent public interface</span>
<a name="l00003"></a>00003 <span class="comment">* Last Updated for Version: 4.0.00</span>
<a name="l00004"></a>00004 <span class="comment">* Date of the Last Update:  Apr 06, 2008</span>
<a name="l00005"></a>00005 <span class="comment">*</span>
<a name="l00006"></a>00006 <span class="comment">*                    Q u a n t u m     L e a P s</span>
<a name="l00007"></a>00007 <span class="comment">*                    ---------------------------</span>
<a name="l00008"></a>00008 <span class="comment">*                    innovating embedded systems</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* Copyright (C) 2002-2008 Quantum Leaps, LLC. All rights reserved.</span>
<a name="l00011"></a>00011 <span class="comment">*</span>
<a name="l00012"></a>00012 <span class="comment">* This software may be distributed and modified under the terms of the GNU</span>
<a name="l00013"></a>00013 <span class="comment">* General Public License version 2 (GPL) as published by the Free Software</span>
<a name="l00014"></a>00014 <span class="comment">* Foundation and appearing in the file GPL.TXT included in the packaging of</span>
<a name="l00015"></a>00015 <span class="comment">* this file. Please note that GPL Section 2[b] requires that all works based</span>
<a name="l00016"></a>00016 <span class="comment">* on this software must also be made publicly available under the terms of</span>
<a name="l00017"></a>00017 <span class="comment">* the GPL (&quot;Copyleft&quot;).</span>
<a name="l00018"></a>00018 <span class="comment">*</span>
<a name="l00019"></a>00019 <span class="comment">* Alternatively, this software may be distributed and modified under the</span>
<a name="l00020"></a>00020 <span class="comment">* terms of Quantum Leaps commercial licenses, which expressly supersede</span>
<a name="l00021"></a>00021 <span class="comment">* the GPL and are specifically designed for licensees interested in</span>
<a name="l00022"></a>00022 <span class="comment">* retaining the proprietary status of their code.</span>
<a name="l00023"></a>00023 <span class="comment">*</span>
<a name="l00024"></a>00024 <span class="comment">* Contact information:</span>
<a name="l00025"></a>00025 <span class="comment">* Quantum Leaps Web site:  http://www.quantum-leaps.com</span>
<a name="l00026"></a>00026 <span class="comment">* e-mail:                  info@quantum-leaps.com</span>
<a name="l00027"></a>00027 <span class="comment">*****************************************************************************/</span>
<a name="l00028"></a>00028 <span class="preprocessor">#ifndef qf_h</span>
<a name="l00029"></a>00029 <span class="preprocessor"></span><span class="preprocessor">#define qf_h</span>
<a name="l00030"></a>00030 <span class="preprocessor"></span>
<a name="l00040"></a>00040 <span class="comment">/****************************************************************************/</span>
<a name="l00041"></a>00041 <span class="preprocessor">#if (QF_MAX_ACTIVE &lt; 1) || (63 &lt; QF_MAX_ACTIVE)</span>
<a name="l00042"></a>00042 <span class="preprocessor"></span><span class="preprocessor">    #error &quot;QF_MAX_ACTIVE not defined or out of range. Valid range is 1..63&quot;</span>
<a name="l00043"></a>00043 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00044"></a>00044 <span class="preprocessor"></span>
<a name="l00045"></a>00045 <span class="comment">/****************************************************************************/</span>
<a name="l00046"></a>00046 <span class="preprocessor">#ifndef QF_EVENT_SIZ_SIZE</span>
<a name="l00047"></a>00047 <span class="preprocessor"></span>
<a name="l00049"></a><a class="code" href="qf_8h.html#a1272d49c23ca5852a7a8e9603ba32d31">00049</a> <span class="preprocessor">    #define QF_EVENT_SIZ_SIZE 2</span>
<a name="l00050"></a>00050 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00051"></a>00051 <span class="preprocessor"></span><span class="preprocessor">#if (QF_EVENT_SIZ_SIZE == 1)</span>
<a name="l00052"></a>00052 <span class="preprocessor"></span>
<a name="l00058"></a>00058     <span class="keyword">typedef</span> uint8_t QEventSize;
<a name="l00059"></a>00059 <span class="preprocessor">#elif (QF_EVENT_SIZ_SIZE == 2)</span>
<a name="l00060"></a>00060 <span class="preprocessor"></span>    <span class="keyword">typedef</span> uint16_t QEventSize;
<a name="l00061"></a>00061 <span class="preprocessor">#elif (QF_EVENT_SIZ_SIZE == 4)</span>
<a name="l00062"></a>00062 <span class="preprocessor"></span>    <span class="keyword">typedef</span> uint32_t QEventSize;
<a name="l00063"></a>00063 <span class="preprocessor">#else</span>
<a name="l00064"></a>00064 <span class="preprocessor"></span><span class="preprocessor">    #error &quot;QF_EVENT_SIZ_SIZE defined incorrectly, expected 1, 2, or 4&quot;</span>
<a name="l00065"></a>00065 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00066"></a>00066 <span class="preprocessor"></span>
<a name="l00067"></a>00067 <span class="comment">/****************************************************************************/</span>
<a name="l00068"></a>00068 <span class="preprocessor">#ifndef QF_ACTIVE_SUPER_</span>
<a name="l00069"></a>00069 <span class="preprocessor"></span>
<a name="l00087"></a><a class="code" href="qf_8h.html#a693fe2fdd4b701be0836f7cad7ee7e45">00087</a> <span class="preprocessor">    #define QF_ACTIVE_SUPER_               QHsm</span>
<a name="l00088"></a>00088 <span class="preprocessor"></span>
<a name="l00092"></a><a class="code" href="qf_8h.html#a627f5a9d208e4ce8bd18434aa4aef24a">00092</a> <span class="preprocessor">    #define QF_ACTIVE_CTOR_(me_, initial_) QHsm_ctor((me_), (initial_))</span>
<a name="l00093"></a>00093 <span class="preprocessor"></span>
<a name="l00097"></a><a class="code" href="qf_8h.html#a74f913be2ad0e3848963527235a84f99">00097</a> <span class="preprocessor">    #define QF_ACTIVE_INIT_(me_, e_)       QHsm_init((me_), (e_))</span>
<a name="l00098"></a>00098 <span class="preprocessor"></span>
<a name="l00102"></a><a class="code" href="qf_8h.html#ac3b01c32b1be46d85f95f0bf71528225">00102</a> <span class="preprocessor">    #define QF_ACTIVE_DISPATCH_(me_, e_)   QHsm_dispatch((me_), (e_))</span>
<a name="l00103"></a>00103 <span class="preprocessor"></span>
<a name="l00106"></a><a class="code" href="qf_8h.html#a63b8eade38e9ed1bd9e34cf10ceb718b">00106</a> <span class="preprocessor">    #define QF_ACTIVE_STATE_               QStateHandler</span>
<a name="l00107"></a>00107 <span class="preprocessor"></span>
<a name="l00108"></a>00108 <span class="preprocessor">#endif</span>
<a name="l00109"></a>00109 <span class="preprocessor"></span>
<a name="l00110"></a>00110 <span class="keyword">struct </span>QEQueueTag;                                   <span class="comment">/* forward declaration */</span>
<a name="l00111"></a>00111 
<a name="l00112"></a>00112 <span class="comment">/****************************************************************************/</span>
<a name="l00133"></a><a class="code" href="struct_q_active.html">00133</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>QActiveTag {
<a name="l00137"></a><a class="code" href="struct_q_active.html#a53ea9d7ea823ef2f6c18d703e31a588b">00137</a>     <a class="code" href="qf_8h.html#a693fe2fdd4b701be0836f7cad7ee7e45" title="the base structure for derivation of the QActive structure.">QF_ACTIVE_SUPER_</a> <a class="code" href="struct_q_active.html#a53ea9d7ea823ef2f6c18d703e31a588b">super</a>;
<a name="l00138"></a>00138 
<a name="l00149"></a><a class="code" href="struct_q_active.html#a8068dbe935e6127072dbc05a5818edae">00149</a>     <a class="code" href="qk_8h.html#aee19c1d6e860d59dda6e539852b99dbe" title="This macro defines the type of the event queue used for the active objects.">QF_EQUEUE_TYPE</a> <a class="code" href="struct_q_active.html#a8068dbe935e6127072dbc05a5818edae" title="OS-dependent event-queue type.">eQueue</a>;
<a name="l00150"></a>00150 
<a name="l00151"></a>00151 <span class="preprocessor">#ifdef QF_OS_OBJECT_TYPE</span>
<a name="l00152"></a>00152 <span class="preprocessor"></span>
<a name="l00159"></a>00159     QF_OS_OBJECT_TYPE osObject;
<a name="l00160"></a>00160 <span class="preprocessor">#endif</span>
<a name="l00161"></a>00161 <span class="preprocessor"></span>
<a name="l00162"></a>00162 <span class="preprocessor">#ifdef QF_THREAD_TYPE</span>
<a name="l00163"></a>00163 <span class="preprocessor"></span>
<a name="l00169"></a>00169     QF_THREAD_TYPE thread;
<a name="l00170"></a>00170 <span class="preprocessor">#endif</span>
<a name="l00171"></a>00171 <span class="preprocessor"></span>
<a name="l00175"></a><a class="code" href="struct_q_active.html#a083eed8e8b538231e2bbeef6af38203f">00175</a>     uint8_t <a class="code" href="struct_q_active.html#a083eed8e8b538231e2bbeef6af38203f" title="QF priority associated with the active object.">prio</a>;
<a name="l00176"></a>00176 
<a name="l00186"></a><a class="code" href="struct_q_active.html#affac08b4eb09d12108fb678057ed0586">00186</a>     uint8_t <a class="code" href="struct_q_active.html#affac08b4eb09d12108fb678057ed0586" title="The Boolean loop variable determining if the thread routine of the active object is running...">running</a>;
<a name="l00187"></a>00187 } <a class="code" href="struct_q_active.html" title="Active Object structure.">QActive</a>;
<a name="l00188"></a>00188 
<a name="l00189"></a>00189 <span class="comment">/* public functions */</span>
<a name="l00217"></a>00217 <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#a0123f02b4c1bcf7df2cc0b11dfce8b09" title="Starts execution of an active object and registers the object with the framework.">QActive_start</a>(<a class="code" href="struct_q_active.html" title="Active Object structure.">QActive</a> *me, uint8_t prio,
<a name="l00218"></a>00218                    <a class="code" href="struct_q_event.html" title="Event structure.">QEvent</a> <span class="keyword">const</span> *qSto[], uint32_t qLen,
<a name="l00219"></a>00219                    <span class="keywordtype">void</span> *stkSto, uint32_t stkSize,
<a name="l00220"></a>00220                    <a class="code" href="struct_q_event.html" title="Event structure.">QEvent</a> <span class="keyword">const</span> *ie);
<a name="l00221"></a>00221 
<a name="l00239"></a>00239 <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#a5330bd5a4837326763be29d1047d6dd3" title="Posts an event e directly to the event queue of the acitve object me using the First-In-First-Out (FI...">QActive_postFIFO</a>(<a class="code" href="struct_q_active.html" title="Active Object structure.">QActive</a> *me, <a class="code" href="struct_q_event.html" title="Event structure.">QEvent</a> <span class="keyword">const</span> *e);
<a name="l00240"></a>00240 
<a name="l00248"></a>00248 <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#a27984f6494cd1698adce6f8b957ad6c3" title="Posts an event directly to the event queue of the active object me using the Last-In-First-Out (LIFO)...">QActive_postLIFO</a>(<a class="code" href="struct_q_active.html" title="Active Object structure.">QActive</a> *me, <a class="code" href="struct_q_event.html" title="Event structure.">QEvent</a> <span class="keyword">const</span> *e);
<a name="l00249"></a>00249 
<a name="l00250"></a>00250 <span class="comment">/* protected functions ...*/</span>
<a name="l00251"></a>00251 
<a name="l00268"></a><a class="code" href="qf_8h.html#a7ddf2dd243b2bc13589a9c7d22f0e253">00268</a> <span class="preprocessor">#define QActive_ctor(me_, initial_) QF_ACTIVE_CTOR_(&amp;(me_)-&gt;super, (initial_))</span>
<a name="l00269"></a>00269 <span class="preprocessor"></span>
<a name="l00283"></a>00283 <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#a361b6756ee8cbca0005e4c3afc4ada5b" title="Stops execution of an active object and removes it from the framework&amp;#39;s supervision.">QActive_stop</a>(<a class="code" href="struct_q_active.html" title="Active Object structure.">QActive</a> *me);
<a name="l00284"></a>00284 
<a name="l00299"></a>00299 <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#a2cb9015d643ddbf487112dfefb02eef3" title="Subscribes for delivery of signal sig to the active object me.">QActive_subscribe</a>(<a class="code" href="struct_q_active.html" title="Active Object structure.">QActive</a> <span class="keyword">const</span> *me, <a class="code" href="qevent_8h.html#a5dae830cf35fbe668a3fa2b47452a36b" title="QSignal represents the signal of an event.">QSignal</a> sig);
<a name="l00300"></a>00300 
<a name="l00320"></a>00320 <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#ab050587cf7c9786819184e423827e0ff" title="Un-subscribes from the delivery of signal sig to the active object me.">QActive_unsubscribe</a>(<a class="code" href="struct_q_active.html" title="Active Object structure.">QActive</a> <span class="keyword">const</span> *me, <a class="code" href="qevent_8h.html#a5dae830cf35fbe668a3fa2b47452a36b" title="QSignal represents the signal of an event.">QSignal</a> sig);
<a name="l00321"></a>00321 
<a name="l00341"></a>00341 <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#a538f489d1d1be6f6493dbff54ff87337" title="Un-subscribes from the delivery of all signals to the active object me.">QActive_unsubscribeAll</a>(<a class="code" href="struct_q_active.html" title="Active Object structure.">QActive</a> <span class="keyword">const</span> *me);
<a name="l00342"></a>00342 
<a name="l00343"></a>00343 
<a name="l00358"></a>00358 <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#a04e04c02ded69dcd39583107ef4ce299" title="Defer an event to a given separate event queue.">QActive_defer</a>(<a class="code" href="struct_q_active.html" title="Active Object structure.">QActive</a> *me, <span class="keyword">struct</span> QEQueueTag *eq, <a class="code" href="struct_q_event.html" title="Event structure.">QEvent</a> <span class="keyword">const</span> *e);
<a name="l00359"></a>00359 
<a name="l00376"></a>00376 <a class="code" href="struct_q_event.html" title="Event structure.">QEvent</a> <span class="keyword">const</span> *<a class="code" href="qf_8h.html#a2dccaa793e2fc549bae183590f5636a2" title="Recall a deferred event from a given event queue.">QActive_recall</a>(<a class="code" href="struct_q_active.html" title="Active Object structure.">QActive</a> *me, <span class="keyword">struct</span> QEQueueTag *eq);
<a name="l00377"></a>00377 
<a name="l00388"></a>00388 <a class="code" href="struct_q_event.html" title="Event structure.">QEvent</a> <span class="keyword">const</span> *<a class="code" href="qf_8h.html#a7f7c861d8e3e884d52cfe661056e8242" title="Get an event from the event queue of an active object.">QActive_get_</a>(<a class="code" href="struct_q_active.html" title="Active Object structure.">QActive</a> *me);
<a name="l00389"></a>00389 <span class="comment">/* friend class QF; */</span>
<a name="l00390"></a>00390 <span class="comment">/* friend class QTimeEvt; */</span>
<a name="l00391"></a>00391 
<a name="l00392"></a>00392 <span class="comment">/****************************************************************************/</span>
<a name="l00393"></a>00393 <span class="preprocessor">#ifndef QF_TIMEEVT_CTR_SIZE</span>
<a name="l00394"></a>00394 <span class="preprocessor"></span>
<a name="l00397"></a><a class="code" href="qf_8h.html#a80d059a0d02a2573c76f4eb5df0228ae">00397</a> <span class="preprocessor">    #define QF_TIMEEVT_CTR_SIZE 2</span>
<a name="l00398"></a>00398 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00399"></a>00399 <span class="preprocessor"></span><span class="preprocessor">#if (QF_TIMEEVT_CTR_SIZE == 1)</span>
<a name="l00400"></a>00400 <span class="preprocessor"></span>
<a name="l00410"></a>00410     <span class="keyword">typedef</span> uint8_t QTimeEvtCtr;
<a name="l00411"></a>00411 <span class="preprocessor">#elif (QF_TIMEEVT_CTR_SIZE == 2)</span>
<a name="l00412"></a>00412 <span class="preprocessor"></span>    <span class="keyword">typedef</span> uint16_t QTimeEvtCtr;
<a name="l00413"></a>00413 <span class="preprocessor">#elif (QF_TIMEEVT_CTR_SIZE == 4)</span>
<a name="l00414"></a>00414 <span class="preprocessor"></span>    <span class="keyword">typedef</span> uint32_t QTimeEvtCtr;
<a name="l00415"></a>00415 <span class="preprocessor">#else</span>
<a name="l00416"></a>00416 <span class="preprocessor"></span><span class="preprocessor">    #error &quot;QF_TIMEEVT_CTR_SIZE defined incorrectly, expected 1, 2, or 4&quot;</span>
<a name="l00417"></a>00417 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00418"></a>00418 <span class="preprocessor"></span>
<a name="l00452"></a><a class="code" href="struct_q_time_evt.html">00452</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>QTimeEvtTag {
<a name="l00456"></a><a class="code" href="struct_q_time_evt.html#a6252a918ac5d215ff3cc1314cec4e929">00456</a>     <a class="code" href="struct_q_event.html" title="Event structure.">QEvent</a> <a class="code" href="struct_q_time_evt.html#a6252a918ac5d215ff3cc1314cec4e929">super</a>;
<a name="l00457"></a>00457 
<a name="l00460"></a><a class="code" href="struct_q_time_evt.html#ac1a3cdc60a29118b76cf778148c6d7b3">00460</a>     <span class="keyword">struct </span>QTimeEvtTag *<a class="code" href="struct_q_time_evt.html#ac1a3cdc60a29118b76cf778148c6d7b3">prev</a>;
<a name="l00461"></a>00461 
<a name="l00464"></a><a class="code" href="struct_q_time_evt.html#ad2934edc311dd168e04abd32fa10c586">00464</a>     <span class="keyword">struct </span>QTimeEvtTag *<a class="code" href="struct_q_time_evt.html#ad2934edc311dd168e04abd32fa10c586">next</a>;
<a name="l00465"></a>00465 
<a name="l00468"></a><a class="code" href="struct_q_time_evt.html#a44a34a5e8ddf851ff630bd614f9899d3">00468</a>     <a class="code" href="struct_q_active.html" title="Active Object structure.">QActive</a> *<a class="code" href="struct_q_time_evt.html#a44a34a5e8ddf851ff630bd614f9899d3">act</a>;
<a name="l00469"></a>00469 
<a name="l00474"></a><a class="code" href="struct_q_time_evt.html#a6718a7906d311adc6524d12fa488e14f">00474</a>     QTimeEvtCtr <a class="code" href="struct_q_time_evt.html#a6718a7906d311adc6524d12fa488e14f">ctr</a>;
<a name="l00475"></a>00475 
<a name="l00481"></a><a class="code" href="struct_q_time_evt.html#a3b7a26170815aec3dac1166aefb4abdd">00481</a>     QTimeEvtCtr <a class="code" href="struct_q_time_evt.html#a3b7a26170815aec3dac1166aefb4abdd">interval</a>;
<a name="l00482"></a>00482 } <a class="code" href="struct_q_time_evt.html" title="Time Event structure.">QTimeEvt</a>;
<a name="l00483"></a>00483 
<a name="l00484"></a>00484 <span class="comment">/* public functions */</span>
<a name="l00485"></a>00485 
<a name="l00499"></a>00499 <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#aa70d5d11e10b2cbcc7d7de361ab9037d" title="The &amp;quot;constructor&amp;quot; to initialize a Time Event.">QTimeEvt_ctor</a>(<a class="code" href="struct_q_time_evt.html" title="Time Event structure.">QTimeEvt</a> *me, <a class="code" href="qevent_8h.html#a5dae830cf35fbe668a3fa2b47452a36b" title="QSignal represents the signal of an event.">QSignal</a> sig);
<a name="l00500"></a>00500 
<a name="l00519"></a><a class="code" href="qf_8h.html#a7091744cf5947a517782c530fceebc0c">00519</a> <span class="preprocessor">#define QTimeEvt_postIn(me_, act_, nTicks_) do { \</span>
<a name="l00520"></a>00520 <span class="preprocessor">    (me_)-&gt;interval = (QTimeEvtCtr)0; \</span>
<a name="l00521"></a>00521 <span class="preprocessor">    QTimeEvt_arm_((me_), (act_), (nTicks_)); \</span>
<a name="l00522"></a>00522 <span class="preprocessor">} while (0)</span>
<a name="l00523"></a>00523 <span class="preprocessor"></span>
<a name="l00545"></a><a class="code" href="qf_8h.html#ac551ecf84032c1c6799734671be01894">00545</a> <span class="preprocessor">#define QTimeEvt_postEvery(me_, act_, nTicks_) do { \</span>
<a name="l00546"></a>00546 <span class="preprocessor">    (me_)-&gt;interval = (nTicks_); \</span>
<a name="l00547"></a>00547 <span class="preprocessor">    QTimeEvt_arm_((me_), (act_), (nTicks_)); \</span>
<a name="l00548"></a>00548 <span class="preprocessor">} while (0)</span>
<a name="l00549"></a>00549 <span class="preprocessor"></span>
<a name="l00561"></a>00561 uint8_t <a class="code" href="qf_8h.html#a30bbb5b62b4271afc94725b651b326d6" title="Disarm a time event.">QTimeEvt_disarm</a>(<a class="code" href="struct_q_time_evt.html" title="Time Event structure.">QTimeEvt</a> *me);
<a name="l00562"></a>00562 
<a name="l00580"></a>00580 uint8_t <a class="code" href="qf_8h.html#a41a513d4b6b5333b6eddad0737dd30df" title="Rearm a time event.">QTimeEvt_rearm</a>(<a class="code" href="struct_q_time_evt.html" title="Time Event structure.">QTimeEvt</a> *me, QTimeEvtCtr nTicks);
<a name="l00581"></a>00581 
<a name="l00582"></a>00582 <span class="comment">/* private functions */</span>
<a name="l00583"></a>00583 
<a name="l00589"></a>00589 <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#ac5e2b55e92a199f6674b0ce0a7acf66e" title="Arm a time event (internal function to be used through macros only).">QTimeEvt_arm_</a>(<a class="code" href="struct_q_time_evt.html" title="Time Event structure.">QTimeEvt</a> *me, <a class="code" href="struct_q_active.html" title="Active Object structure.">QActive</a> *act, QTimeEvtCtr nTicks);
<a name="l00590"></a>00590 
<a name="l00591"></a>00591 <span class="comment">/* friend class QF; */</span>
<a name="l00592"></a>00592 
<a name="l00593"></a>00593 <span class="comment">/*****************************************************************************</span>
<a name="l00594"></a>00594 <span class="comment">* QF facilities</span>
<a name="l00595"></a>00595 <span class="comment">*/</span>
<a name="l00596"></a>00596 
<a name="l00605"></a><a class="code" href="struct_q_subscr_list.html">00605</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>QSubscrListTag {
<a name="l00606"></a>00606 
<a name="l00616"></a><a class="code" href="struct_q_subscr_list.html#ab297ded6e861d613a1494faf9f3bb887">00616</a>     uint8_t bits[((QF_MAX_ACTIVE - 1) / 8) + 1];
<a name="l00617"></a>00617 } <a class="code" href="struct_q_subscr_list.html" title="Subscriber-List structure.">QSubscrList</a>;
<a name="l00618"></a>00618 
<a name="l00619"></a>00619 <span class="comment">/* public functions */</span>
<a name="l00620"></a>00620 
<a name="l00626"></a>00626 <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#adac7eccb860d910c4e446d3143798bba" title="QF initialization.">QF_init</a>(<span class="keywordtype">void</span>);
<a name="l00627"></a>00627 
<a name="l00652"></a>00652 <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#a9f97f476eb311982be2f2e46011a04e4" title="Publish-subscribe initialization.">QF_psInit</a>(<a class="code" href="struct_q_subscr_list.html" title="Subscriber-List structure.">QSubscrList</a> *subscrSto, <a class="code" href="qevent_8h.html#a5dae830cf35fbe668a3fa2b47452a36b" title="QSignal represents the signal of an event.">QSignal</a> maxSignal);
<a name="l00653"></a>00653 
<a name="l00685"></a>00685 <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#a63817909aa88407fd7d6c1ff3706a249" title="Event pool initialization for dynamic allocation of events.">QF_poolInit</a>(<span class="keywordtype">void</span> *poolSto, uint32_t poolSize, QEventSize evtSize);
<a name="l00686"></a>00686 
<a name="l00707"></a>00707 <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#a7a41998117b4edb760b754f5ee3f61d5" title="Transfers control to QF to run the application.">QF_run</a>(<span class="keywordtype">void</span>);
<a name="l00708"></a>00708 
<a name="l00727"></a>00727 <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#adf9cb86740bf55c5ad55c1d44fd35921" title="Function invoked by the application layer to stop the QF application and return control to the OS/Ker...">QF_stop</a>(<span class="keywordtype">void</span>);
<a name="l00728"></a>00728 
<a name="l00735"></a>00735 <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#a189a6d2ece787717c81fbf51fd180732" title="Startup QF callback.">QF_onStartup</a>(<span class="keywordtype">void</span>);
<a name="l00736"></a>00736 
<a name="l00750"></a>00750 <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#a5d7e181f2e679e1fa77c1e915fbee3e0" title="Cleanup QF callback.">QF_onCleanup</a>(<span class="keywordtype">void</span>);
<a name="l00751"></a>00751 
<a name="l00752"></a>00752 <span class="preprocessor">#ifndef QF_INT_KEY_TYPE</span>
<a name="l00753"></a>00753 <span class="preprocessor"></span>    <span class="keywordtype">void</span> QF_onIdle(<span class="keywordtype">void</span>);                 <span class="comment">/* interrupt lock key NOT defined */</span>
<a name="l00754"></a>00754 
<a name="l00755"></a>00755 <span class="preprocessor">#else</span>
<a name="l00756"></a>00756 <span class="preprocessor"></span>
<a name="l00781"></a>00781     <span class="keywordtype">void</span> QF_onIdle(QF_INT_KEY_TYPE intLockKey);    <span class="comment">/* int. lock key defined */</span>
<a name="l00782"></a>00782 
<a name="l00783"></a>00783 <span class="preprocessor">#endif                                                   </span><span class="comment">/* QF_INT_KEY_TYPE */</span>
<a name="l00784"></a>00784 
<a name="l00798"></a>00798 <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#a1bc0bd9f159dfa5b7a19fdb70877e574" title="Publish event to the framework.">QF_publish</a>(<a class="code" href="struct_q_event.html" title="Event structure.">QEvent</a> <span class="keyword">const</span> *e);
<a name="l00799"></a>00799 
<a name="l00815"></a>00815 <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#afd1f18b068ca10c17eaa3431e77dd290" title="Processes all armed time events at every clock tick.">QF_tick</a>(<span class="keywordtype">void</span>);
<a name="l00816"></a>00816 
<a name="l00817"></a>00817 <span class="comment">/* functions used in the QF ports only -------------------------------------*/</span>
<a name="l00818"></a>00818 
<a name="l00830"></a>00830 <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#aa9425659a2eb0e6f543d2405b762dcc9" title="Register an active object to be managed by the framework.">QF_add_</a>(<a class="code" href="struct_q_active.html" title="Active Object structure.">QActive</a> *a);
<a name="l00831"></a>00831 
<a name="l00844"></a>00844 <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#a649efffb1de001dc75719fcf548e7045" title="Remove the active object from the framework.">QF_remove_</a>(<a class="code" href="struct_q_active.html" title="Active Object structure.">QActive</a> <span class="keyword">const</span> *a);
<a name="l00845"></a>00845 
<a name="l00856"></a>00856 <span class="keywordtype">char</span> <span class="keyword">const</span> <a class="code" href="qevent_8h.html#a4f4cc7253c4d809b326498b40efd66d3" title="Macro to specify compiler-specific directive for placing a constant object in ROM.">Q_ROM</a> * <a class="code" href="qevent_8h.html#ac4b8d7dd267fd787a004ad9b58ec2283" title="Macro to specify compiler-specific directive for accessing a constant object in ROM.">Q_ROM_VAR</a> <a class="code" href="qf_8h.html#a927f2df95064369af767d9ee268ac7e8" title="Returns the QF version.">QF_getVersion</a>(<span class="keywordtype">void</span>);
<a name="l00857"></a>00857 
<a name="l00867"></a>00867 <span class="keywordtype">char</span> <span class="keyword">const</span> <a class="code" href="qevent_8h.html#a4f4cc7253c4d809b326498b40efd66d3" title="Macro to specify compiler-specific directive for placing a constant object in ROM.">Q_ROM</a> * <a class="code" href="qevent_8h.html#ac4b8d7dd267fd787a004ad9b58ec2283" title="Macro to specify compiler-specific directive for accessing a constant object in ROM.">Q_ROM_VAR</a> <a class="code" href="qf_8h.html#af80b99e76774d44c6db8aecc43973965" title="Returns the QF-port version.">QF_getPortVersion</a>(<span class="keywordtype">void</span>);
<a name="l00868"></a>00868 
<a name="l00881"></a>00881 uint32_t <a class="code" href="qf_8h.html#a7e3571c5cb12f59994d97d5b28560934" title="This function returns the margin of the given event pool.">QF_getPoolMargin</a>(uint8_t poolId);
<a name="l00882"></a>00882 
<a name="l00895"></a>00895 uint32_t <a class="code" href="qf_8h.html#a5691094be4c3f02200e43d51535ed172" title="This function returns the margin of the given event queue.">QF_getQueueMargin</a>(uint8_t prio);
<a name="l00896"></a>00896 
<a name="l00902"></a>00902 <a class="code" href="struct_q_event.html" title="Event structure.">QEvent</a> *<a class="code" href="qf_8h.html#a2128fe3499dc6ed8100f5deed5a779a1" title="Internal QF implementation of the dynamic event allocator.">QF_new_</a>(QEventSize evtSize, <a class="code" href="qevent_8h.html#a5dae830cf35fbe668a3fa2b47452a36b" title="QSignal represents the signal of an event.">QSignal</a> sig);
<a name="l00903"></a>00903 
<a name="l00917"></a><a class="code" href="qf_8h.html#abd823f3a9e8b3206a3460a108d5fa3e3">00917</a> <span class="preprocessor">#define Q_NEW(evtT_, sig_) ((evtT_ *)QF_new_(sizeof(evtT_), (sig_)))</span>
<a name="l00918"></a>00918 <span class="preprocessor"></span>
<a name="l00940"></a>00940 <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#a40fe2f66781a8ac8170f0b188b879783" title="Recycle a dynamic event.">QF_gc</a>(<a class="code" href="struct_q_event.html" title="Event structure.">QEvent</a> <span class="keyword">const</span> *e);
<a name="l00941"></a>00941 
<a name="l00950"></a>00950 <span class="keyword">extern</span> uint8_t <span class="keyword">const</span> <a class="code" href="qevent_8h.html#a4f4cc7253c4d809b326498b40efd66d3" title="Macro to specify compiler-specific directive for placing a constant object in ROM.">Q_ROM</a> <a class="code" href="qevent_8h.html#ac4b8d7dd267fd787a004ad9b58ec2283" title="Macro to specify compiler-specific directive for accessing a constant object in ROM.">Q_ROM_VAR</a> <a class="code" href="qf_8h.html#ab47e1f0b5f8a97bc75f7ff7d62c5e18f" title="Lookup table for (log2(n) + 1), where n is the index into the table.">QF_log2Lkup</a>[256];
<a name="l00951"></a>00951 
<a name="l00957"></a>00957 <span class="keyword">extern</span> uint8_t <span class="keyword">const</span> <a class="code" href="qevent_8h.html#a4f4cc7253c4d809b326498b40efd66d3" title="Macro to specify compiler-specific directive for placing a constant object in ROM.">Q_ROM</a> <a class="code" href="qevent_8h.html#ac4b8d7dd267fd787a004ad9b58ec2283" title="Macro to specify compiler-specific directive for accessing a constant object in ROM.">Q_ROM_VAR</a> <a class="code" href="qf_8h.html#a2091dd1ed771cbef5ca70e1542829cc4" title="Lookup table for (1 &amp;lt;&amp;lt; ((n-1) % 8)), where n is the index into the table.">QF_pwr2Lkup</a>[65];
<a name="l00958"></a>00958 
<a name="l00964"></a>00964 <span class="keyword">extern</span> uint8_t <span class="keyword">const</span> <a class="code" href="qevent_8h.html#a4f4cc7253c4d809b326498b40efd66d3" title="Macro to specify compiler-specific directive for placing a constant object in ROM.">Q_ROM</a> <a class="code" href="qevent_8h.html#ac4b8d7dd267fd787a004ad9b58ec2283" title="Macro to specify compiler-specific directive for accessing a constant object in ROM.">Q_ROM_VAR</a> <a class="code" href="qf_8h.html#a01186f1b8051d6e98c86f76bd9d95f32" title="Lookup table for ~(1 &amp;lt;&amp;lt; ((n-1) % 8)), where n is the index into the table.">QF_invPwr2Lkup</a>[65];
<a name="l00965"></a>00965 
<a name="l00970"></a>00970 <span class="keyword">extern</span> uint8_t <span class="keyword">const</span> <a class="code" href="qevent_8h.html#a4f4cc7253c4d809b326498b40efd66d3" title="Macro to specify compiler-specific directive for placing a constant object in ROM.">Q_ROM</a> <a class="code" href="qevent_8h.html#ac4b8d7dd267fd787a004ad9b58ec2283" title="Macro to specify compiler-specific directive for accessing a constant object in ROM.">Q_ROM_VAR</a> <a class="code" href="qf_8h.html#a765803e2ff8d3550b3334efe9c366709" title="Lookup table for (n-1)/8.">QF_div8Lkup</a>[65];
<a name="l00971"></a>00971 
<a name="l00972"></a>00972 
<a name="l00977"></a>00977 <span class="keyword">extern</span> <a class="code" href="struct_q_active.html" title="Active Object structure.">QActive</a> *<a class="code" href="qf_8h.html#a563e9f8e405ba684acba0b8f1a3ad9a6" title="array of registered active objects">QF_active_</a>[];
<a name="l00978"></a>00978 
<a name="l00979"></a>00979 <span class="comment">/****************************************************************************/</span>
<a name="l00980"></a>00980 <span class="comment">/* QS software tracing integration, only if enabled                         */</span>
<a name="l00981"></a>00981 <span class="preprocessor">#ifdef Q_SPY                                </span><span class="comment">/* QS software tracing enabled? */</span>
<a name="l00982"></a>00982 <span class="preprocessor">    #ifndef qs_h</span>
<a name="l00983"></a>00983 <span class="preprocessor"></span><span class="preprocessor">    #include &quot;qs_port.h&quot;</span>                                 <span class="comment">/* include QS port */</span>
<a name="l00984"></a>00984 <span class="preprocessor">    #endif                                                          </span><span class="comment">/* qs_h */</span>
<a name="l00985"></a>00985 
<a name="l00986"></a>00986 <span class="preprocessor">    #if (QF_EQUEUE_CTR_SIZE == 1)</span>
<a name="l00987"></a>00987 <span class="preprocessor"></span>
<a name="l00992"></a>00992 <span class="preprocessor">        #define QS_EQC_(ctr_)       QS_u8_(ctr_)</span>
<a name="l00993"></a>00993 <span class="preprocessor"></span><span class="preprocessor">    #elif (QF_EQUEUE_CTR_SIZE == 2)</span>
<a name="l00994"></a>00994 <span class="preprocessor"></span><span class="preprocessor">        #define QS_EQC_(ctr_)       QS_u16_(ctr_)</span>
<a name="l00995"></a>00995 <span class="preprocessor"></span><span class="preprocessor">    #elif (QF_EQUEUE_CTR_SIZE == 4)</span>
<a name="l00996"></a>00996 <span class="preprocessor"></span><span class="preprocessor">        #define QS_EQC_(ctr_)       QS_u32_(ctr_)</span>
<a name="l00997"></a>00997 <span class="preprocessor"></span><span class="preprocessor">    #else</span>
<a name="l00998"></a>00998 <span class="preprocessor"></span><span class="preprocessor">        #error &quot;QF_EQUEUE_CTR_SIZE not defined&quot;</span>
<a name="l00999"></a>00999 <span class="preprocessor"></span><span class="preprocessor">    #endif</span>
<a name="l01000"></a>01000 <span class="preprocessor"></span>
<a name="l01001"></a>01001 
<a name="l01002"></a>01002 <span class="preprocessor">    #if (QF_EVENT_SIZ_SIZE == 1)</span>
<a name="l01003"></a>01003 <span class="preprocessor"></span>
<a name="l01008"></a>01008 <span class="preprocessor">        #define QS_EVS_(size_)      QS_u8_(size_)</span>
<a name="l01009"></a>01009 <span class="preprocessor"></span><span class="preprocessor">    #elif (QF_EVENT_SIZ_SIZE == 2)</span>
<a name="l01010"></a>01010 <span class="preprocessor"></span><span class="preprocessor">        #define QS_EVS_(size_)      QS_u16_(size_)</span>
<a name="l01011"></a>01011 <span class="preprocessor"></span><span class="preprocessor">    #elif (QF_EVENT_SIZ_SIZE == 4)</span>
<a name="l01012"></a>01012 <span class="preprocessor"></span><span class="preprocessor">        #define QS_EVS_(size_)      QS_u32_(size_)</span>
<a name="l01013"></a>01013 <span class="preprocessor"></span><span class="preprocessor">    #endif</span>
<a name="l01014"></a>01014 <span class="preprocessor"></span>
<a name="l01015"></a>01015 
<a name="l01016"></a>01016 <span class="preprocessor">    #if (QF_MPOOL_SIZ_SIZE == 1)</span>
<a name="l01017"></a>01017 <span class="preprocessor"></span>
<a name="l01022"></a>01022 <span class="preprocessor">        #define QS_MPS_(size_)      QS_u8_(size_)</span>
<a name="l01023"></a>01023 <span class="preprocessor"></span><span class="preprocessor">    #elif (QF_MPOOL_SIZ_SIZE == 2)</span>
<a name="l01024"></a>01024 <span class="preprocessor"></span><span class="preprocessor">        #define QS_MPS_(size_)      QS_u16_(size_)</span>
<a name="l01025"></a>01025 <span class="preprocessor"></span><span class="preprocessor">    #elif (QF_MPOOL_SIZ_SIZE == 4)</span>
<a name="l01026"></a>01026 <span class="preprocessor"></span><span class="preprocessor">        #define QS_MPS_(size_)      QS_u32_(size_)</span>
<a name="l01027"></a>01027 <span class="preprocessor"></span><span class="preprocessor">    #endif</span>
<a name="l01028"></a>01028 <span class="preprocessor"></span>
<a name="l01029"></a>01029 <span class="preprocessor">    #if (QF_MPOOL_CTR_SIZE == 1)</span>
<a name="l01030"></a>01030 <span class="preprocessor"></span>
<a name="l01035"></a>01035 <span class="preprocessor">        #define QS_MPC_(ctr_)       QS_u8_(ctr_)</span>
<a name="l01036"></a>01036 <span class="preprocessor"></span><span class="preprocessor">    #elif (QF_MPOOL_CTR_SIZE == 2)</span>
<a name="l01037"></a>01037 <span class="preprocessor"></span><span class="preprocessor">        #define QS_MPC_(ctr_)       QS_u16_(ctr_)</span>
<a name="l01038"></a>01038 <span class="preprocessor"></span><span class="preprocessor">    #elif (QF_MPOOL_CTR_SIZE == 4)</span>
<a name="l01039"></a>01039 <span class="preprocessor"></span><span class="preprocessor">        #define QS_MPC_(ctr_)       QS_u32_(ctr_)</span>
<a name="l01040"></a>01040 <span class="preprocessor"></span><span class="preprocessor">    #endif</span>
<a name="l01041"></a>01041 <span class="preprocessor"></span>
<a name="l01042"></a>01042 
<a name="l01043"></a>01043 <span class="preprocessor">    #if (QF_TIMEEVT_CTR_SIZE == 1)</span>
<a name="l01044"></a>01044 <span class="preprocessor"></span>
<a name="l01049"></a>01049 <span class="preprocessor">        #define QS_TEC_(ctr_)       QS_u8_(ctr_)</span>
<a name="l01050"></a>01050 <span class="preprocessor"></span><span class="preprocessor">    #elif (QF_TIMEEVT_CTR_SIZE == 2)</span>
<a name="l01051"></a>01051 <span class="preprocessor"></span><span class="preprocessor">        #define QS_TEC_(ctr_)       QS_u16_(ctr_)</span>
<a name="l01052"></a>01052 <span class="preprocessor"></span><span class="preprocessor">    #elif (QF_TIMEEVT_CTR_SIZE == 4)</span>
<a name="l01053"></a>01053 <span class="preprocessor"></span><span class="preprocessor">        #define QS_TEC_(ctr_)       QS_u32_(ctr_)</span>
<a name="l01054"></a>01054 <span class="preprocessor"></span><span class="preprocessor">    #endif</span>
<a name="l01055"></a>01055 <span class="preprocessor"></span>
<a name="l01056"></a>01056 <span class="preprocessor">#else</span>
<a name="l01057"></a>01057 <span class="preprocessor"></span><span class="preprocessor">    #ifndef qs_dummy_h</span>
<a name="l01058"></a>01058 <span class="preprocessor"></span><span class="preprocessor">    #include &quot;<a class="code" href="qs__dummy_8h.html" title="Dummy definitions of the QS macros that avoid code generation from the QS instrumentation.">qs_dummy.h</a>&quot;</span>                <span class="comment">/* disable the QS software tracing */</span>
<a name="l01059"></a>01059 <span class="preprocessor">    #endif</span>
<a name="l01060"></a>01060 <span class="preprocessor"></span><span class="preprocessor">#endif                                                             </span><span class="comment">/* Q_SPY */</span>
<a name="l01061"></a>01061 
<a name="l01062"></a>01062 <span class="preprocessor">#endif                                                              </span><span class="comment">/* qf_h */</span>
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Apr 26 2011 09:40:32 for QP/C by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
